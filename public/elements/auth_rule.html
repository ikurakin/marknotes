{{define "auth_rule"}}
    {{if or 
        (eq .AuthRule "always-mode") 
        (and (eq .AuthRule "user-mode") .UserID) 
        (and (eq .AuthRule "guest-mode") (not .UserID))
    }}
        visible
    {{else}}
        hidden
    {{end}}
{{end}}